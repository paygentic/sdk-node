/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v3";
import { ClosedEnum } from "../../types/enums.js";

/**
 * How events are processed - automatic (immediate) or manual (requires approval)
 */
export const CreateSourceProcessingMode = {
  Automatic: "automatic",
  Manual: "manual",
} as const;
/**
 * How events are processed - automatic (immediate) or manual (requires approval)
 */
export type CreateSourceProcessingMode = ClosedEnum<
  typeof CreateSourceProcessingMode
>;

/**
 * The type of source. Currently only 'stripe_revenue' is supported.
 */
export const CreateSourceType = {
  StripeRevenue: "stripe_revenue",
} as const;
/**
 * The type of source. Currently only 'stripe_revenue' is supported.
 */
export type CreateSourceType = ClosedEnum<typeof CreateSourceType>;

export type CreateSourceRequest = {
  /**
   * Configuration specific to the source type. For stripe_revenue, must include ampersandProjectId.
   */
  config?: { [k: string]: any } | undefined;
  /**
   * Optional explanation of the source's purpose. Sample values: 'Automated usage tracking from Stripe revenue data', 'Language model token consumption monitoring', 'Data warehouse query tracking', 'Machine learning inference usage collection'
   */
  description?: string | undefined;
  /**
   * Whether the source is enabled
   */
  enabled?: boolean | undefined;
  /**
   * Metadata for the source. For stripe_revenue, must include billableMetricMapping with revenue (billable metric ID).
   */
  metadata?: { [k: string]: any } | undefined;
  /**
   * Display label for the external data source. Sample values: 'Stripe Revenue Integration', 'LLM Usage Tracker', 'Data Processing Monitor', 'ML Compute Usage Source'
   */
  name: string;
  /**
   * Unique identifier for a plan
   */
  planId: string;
  /**
   * How events are processed - automatic (immediate) or manual (requires approval)
   */
  processingMode?: CreateSourceProcessingMode | undefined;
  /**
   * The type of source. Currently only 'stripe_revenue' is supported.
   */
  type: CreateSourceType;
};

/** @internal */
export const CreateSourceProcessingMode$outboundSchema: z.ZodNativeEnum<
  typeof CreateSourceProcessingMode
> = z.nativeEnum(CreateSourceProcessingMode);

/** @internal */
export const CreateSourceType$outboundSchema: z.ZodNativeEnum<
  typeof CreateSourceType
> = z.nativeEnum(CreateSourceType);

/** @internal */
export type CreateSourceRequest$Outbound = {
  config?: { [k: string]: any } | undefined;
  description?: string | undefined;
  enabled: boolean;
  metadata?: { [k: string]: any } | undefined;
  name: string;
  planId: string;
  processingMode: string;
  type: string;
};

/** @internal */
export const CreateSourceRequest$outboundSchema: z.ZodType<
  CreateSourceRequest$Outbound,
  z.ZodTypeDef,
  CreateSourceRequest
> = z.object({
  config: z.record(z.any()).optional(),
  description: z.string().optional(),
  enabled: z.boolean().default(true),
  metadata: z.record(z.any()).optional(),
  name: z.string(),
  planId: z.string(),
  processingMode: CreateSourceProcessingMode$outboundSchema.default(
    "automatic",
  ),
  type: CreateSourceType$outboundSchema,
});

export function createSourceRequestToJSON(
  createSourceRequest: CreateSourceRequest,
): string {
  return JSON.stringify(
    CreateSourceRequest$outboundSchema.parse(createSourceRequest),
  );
}
