/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v3";
import { safeParse } from "../../lib/schemas.js";
import { ClosedEnum } from "../../types/enums.js";
import { Result as SafeParseResult } from "../../types/fp.js";
import { SDKValidationError } from "../errors/sdkvalidationerror.js";
import * as models from "../index.js";

export type ListFeaturesRequest = {
  /**
   * The product ID to filter features by
   */
  productId: string;
  /**
   * Optional feature key to filter by. If provided, returns only the feature matching both productId and key
   */
  key?: string | undefined;
  /**
   * Number of features to return.
   */
  limit?: number | undefined;
  /**
   * Number of features to skip.
   */
  offset?: number | undefined;
};

export const ListFeaturesObject = {
  List: "list",
} as const;
export type ListFeaturesObject = ClosedEnum<typeof ListFeaturesObject>;

export type ListFeaturesPagination = {
  /**
   * Number of items requested
   */
  limit: number;
  /**
   * Number of items skipped
   */
  offset: number;
  /**
   * Total number of items matching the query
   */
  total: number;
};

/**
 * List of features
 */
export type ListFeaturesResponse = {
  object: ListFeaturesObject;
  data: Array<models.Feature>;
  pagination: ListFeaturesPagination;
};

/** @internal */
export type ListFeaturesRequest$Outbound = {
  productId: string;
  key?: string | undefined;
  limit: number;
  offset: number;
};

/** @internal */
export const ListFeaturesRequest$outboundSchema: z.ZodType<
  ListFeaturesRequest$Outbound,
  z.ZodTypeDef,
  ListFeaturesRequest
> = z.object({
  productId: z.string(),
  key: z.string().optional(),
  limit: z.number().int().default(10),
  offset: z.number().int().default(0),
});

export function listFeaturesRequestToJSON(
  listFeaturesRequest: ListFeaturesRequest,
): string {
  return JSON.stringify(
    ListFeaturesRequest$outboundSchema.parse(listFeaturesRequest),
  );
}

/** @internal */
export const ListFeaturesObject$inboundSchema: z.ZodNativeEnum<
  typeof ListFeaturesObject
> = z.nativeEnum(ListFeaturesObject);

/** @internal */
export const ListFeaturesPagination$inboundSchema: z.ZodType<
  ListFeaturesPagination,
  z.ZodTypeDef,
  unknown
> = z.object({
  limit: z.number().int(),
  offset: z.number().int(),
  total: z.number().int(),
});

export function listFeaturesPaginationFromJSON(
  jsonString: string,
): SafeParseResult<ListFeaturesPagination, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => ListFeaturesPagination$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'ListFeaturesPagination' from JSON`,
  );
}

/** @internal */
export const ListFeaturesResponse$inboundSchema: z.ZodType<
  ListFeaturesResponse,
  z.ZodTypeDef,
  unknown
> = z.object({
  object: ListFeaturesObject$inboundSchema,
  data: z.array(models.Feature$inboundSchema),
  pagination: z.lazy(() => ListFeaturesPagination$inboundSchema),
});

export function listFeaturesResponseFromJSON(
  jsonString: string,
): SafeParseResult<ListFeaturesResponse, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => ListFeaturesResponse$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'ListFeaturesResponse' from JSON`,
  );
}
