/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v3";

export type EntitlementDatum = {
  /**
   * Unique identifier for a billable metric
   */
  billableMetricId: string;
  /**
   * Optional per-unit price override in decimal dollars for variable-rate pricing. Sample values: '0.000025' sets $0.000025 per token, '0.12' sets $0.12 per GB
   */
  price?: string | undefined;
  /**
   * Amount of metric units to pre-authorize. Sample values: 10000 tokens, 500 GB storage, 1000 API calls, 24 compute hours
   */
  quantity: number;
};

export type CreateEntitlementRequest = {
  /**
   * Unique identifier for a customer
   */
  customerId: string;
  /**
   * Array of consumption metrics with quantities to pre-authorize payment for.
   */
  entitlementData: Array<EntitlementDatum>;
  /**
   * Maximum consumption events allowed before expiration (optional). Defaults to 1 for global entitlements, 100 for regional entitlements.
   */
  maxUses?: number | undefined;
  /**
   * Unique identifier for a merchant/organization
   */
  merchantId: string;
};

/** @internal */
export type EntitlementDatum$Outbound = {
  billableMetricId: string;
  price?: string | undefined;
  quantity: number;
};

/** @internal */
export const EntitlementDatum$outboundSchema: z.ZodType<
  EntitlementDatum$Outbound,
  z.ZodTypeDef,
  EntitlementDatum
> = z.object({
  billableMetricId: z.string(),
  price: z.string().optional(),
  quantity: z.number(),
});

export function entitlementDatumToJSON(
  entitlementDatum: EntitlementDatum,
): string {
  return JSON.stringify(
    EntitlementDatum$outboundSchema.parse(entitlementDatum),
  );
}

/** @internal */
export type CreateEntitlementRequest$Outbound = {
  customerId: string;
  entitlementData: Array<EntitlementDatum$Outbound>;
  maxUses?: number | undefined;
  merchantId: string;
};

/** @internal */
export const CreateEntitlementRequest$outboundSchema: z.ZodType<
  CreateEntitlementRequest$Outbound,
  z.ZodTypeDef,
  CreateEntitlementRequest
> = z.object({
  customerId: z.string(),
  entitlementData: z.array(z.lazy(() => EntitlementDatum$outboundSchema)),
  maxUses: z.number().int().optional(),
  merchantId: z.string(),
});

export function createEntitlementRequestToJSON(
  createEntitlementRequest: CreateEntitlementRequest,
): string {
  return JSON.stringify(
    CreateEntitlementRequest$outboundSchema.parse(createEntitlementRequest),
  );
}
