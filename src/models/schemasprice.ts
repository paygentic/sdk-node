/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v3";
import { safeParse } from "../lib/schemas.js";
import { ClosedEnum } from "../types/enums.js";
import { Result as SafeParseResult } from "../types/fp.js";
import { SDKValidationError } from "./errors/sdkvalidationerror.js";
import { PriceFeature, PriceFeature$inboundSchema } from "./pricefeature.js";
import {
  PricePropertiesUnion,
  PricePropertiesUnion$inboundSchema,
} from "./pricepropertiesunion.js";

export const SchemasPriceObject = {
  Price: "price",
} as const;
export type SchemasPriceObject = ClosedEnum<typeof SchemasPriceObject>;

export const SchemasPriceModel = {
  Standard: "standard",
  Dynamic: "dynamic",
  Volume: "volume",
  Percentage: "percentage",
} as const;
export type SchemasPriceModel = ClosedEnum<typeof SchemasPriceModel>;

export const SchemasPricePaymentTerm = {
  Instant: "instant",
  InArrears: "in_arrears",
  InAdvance: "in_advance",
} as const;
export type SchemasPricePaymentTerm = ClosedEnum<
  typeof SchemasPricePaymentTerm
>;

export type SchemasPrice = {
  /**
   * Unique identifier for a price
   */
  id: string;
  object: SchemasPriceObject;
  /**
   * Unique identifier for a billable metric
   */
  billableMetricId?: string | undefined;
  /**
   * The unique identifier for the fee referred to by this price. Present when price is linked to a fee.
   */
  feeId?: string | undefined;
  /**
   * ISO 8601 duration. 'P0D' for one-time, 'P1M' for monthly, 'P1Y' for yearly. Required for fees, optional for billable metrics. Defaults to plan's billingCadence if not specified.
   */
  billingCadence?: string | null | undefined;
  createdAt: Date;
  invoiceDisplayName: string;
  model?: SchemasPriceModel | undefined;
  paymentTerm: SchemasPricePaymentTerm;
  properties: PricePropertiesUnion;
  updatedAt: Date;
  /**
   * Features associated with this price
   */
  features?: Array<PriceFeature> | undefined;
};

/** @internal */
export const SchemasPriceObject$inboundSchema: z.ZodNativeEnum<
  typeof SchemasPriceObject
> = z.nativeEnum(SchemasPriceObject);

/** @internal */
export const SchemasPriceModel$inboundSchema: z.ZodNativeEnum<
  typeof SchemasPriceModel
> = z.nativeEnum(SchemasPriceModel);

/** @internal */
export const SchemasPricePaymentTerm$inboundSchema: z.ZodNativeEnum<
  typeof SchemasPricePaymentTerm
> = z.nativeEnum(SchemasPricePaymentTerm);

/** @internal */
export const SchemasPrice$inboundSchema: z.ZodType<
  SchemasPrice,
  z.ZodTypeDef,
  unknown
> = z.object({
  id: z.string(),
  object: SchemasPriceObject$inboundSchema.default("price"),
  billableMetricId: z.string().optional(),
  feeId: z.string().optional(),
  billingCadence: z.nullable(z.string()).optional(),
  createdAt: z.string().datetime({ offset: true }).transform(v => new Date(v)),
  invoiceDisplayName: z.string(),
  model: SchemasPriceModel$inboundSchema.optional(),
  paymentTerm: SchemasPricePaymentTerm$inboundSchema,
  properties: PricePropertiesUnion$inboundSchema,
  updatedAt: z.string().datetime({ offset: true }).transform(v => new Date(v)),
  features: z.array(PriceFeature$inboundSchema).optional(),
});

export function schemasPriceFromJSON(
  jsonString: string,
): SafeParseResult<SchemasPrice, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => SchemasPrice$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'SchemasPrice' from JSON`,
  );
}
