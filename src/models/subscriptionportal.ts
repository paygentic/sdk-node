/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v3";
import { safeParse } from "../lib/schemas.js";
import { ClosedEnum } from "../types/enums.js";
import { Result as SafeParseResult } from "../types/fp.js";
import { SDKValidationError } from "./errors/sdkvalidationerror.js";

export const SubscriptionPortalObject = {
  SubscriptionPortal: "subscriptionPortal",
} as const;
export type SubscriptionPortalObject = ClosedEnum<
  typeof SubscriptionPortalObject
>;

export type SubscriptionPortal = {
  object: SubscriptionPortalObject;
  /**
   * Portal link expiration timestamp in ISO 8601 format. Sample values: '2024-01-15T23:59:59Z', '2024-02-01T12:00:00Z'
   */
  expiresAt: Date;
  /**
   * Secure portal access URL for customer subscription management. Sample values: 'https://portal.paygentic.com/sub/abc123?token=xyz789', 'https://customer.example.com/portal/sub_456def'
   */
  url: string;
};

/** @internal */
export const SubscriptionPortalObject$inboundSchema: z.ZodNativeEnum<
  typeof SubscriptionPortalObject
> = z.nativeEnum(SubscriptionPortalObject);

/** @internal */
export const SubscriptionPortal$inboundSchema: z.ZodType<
  SubscriptionPortal,
  z.ZodTypeDef,
  unknown
> = z.object({
  object: SubscriptionPortalObject$inboundSchema,
  expiresAt: z.string().datetime({ offset: true }).transform(v => new Date(v)),
  url: z.string(),
});

export function subscriptionPortalFromJSON(
  jsonString: string,
): SafeParseResult<SubscriptionPortal, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => SubscriptionPortal$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'SubscriptionPortal' from JSON`,
  );
}
